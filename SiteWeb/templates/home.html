{% extends 'base.html' %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
{% endblock %}

{% block content %}
  <h1>{{ title }}</h1>
  <div class="sample">
    {% for x in books %}
      <a href="{{ url_for('detail', id=x.id) }}">
        <img src="{{ url_for('static', filename='images/' + x.img) }}" 
             alt="{{ x.title }}" title="{{ x.title }}">
      </a>
    {% endfor %}
  </div>
  <div class="container mt-5">
    <h1 class="text-center mb-4">Ajouter un livre via fichier (YAML) : </h1>
    <form role="form" method="POST" action="{{ url_for('add_book') }}" 
      enctype="multipart/form-data" class="mx-auto" style="max-width: 600px;">
    {{ form.hidden_tag() }}

    <div class="
        {% if form.livre.errors %}
            form-group has-error
        {% else %}
            form-group
        {% endif %}
    ">
        {{ form.livre.label }} 
        {{ form.livre(size=50, class_="form-control") }}
    </div>

    {% if form.livre.errors %}
    <ul class="list-group">
        {% for e in form.livre.errors %}
        <li class="list-group-item list-group-item-danger">{{ e }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    <div class="d-flex justify-content-end">
        <input id="submit_import" class="btn btn-primary" type="submit" value="Enregistrer">
    </div>
</form>
    <div class="pagination">
      {% if page > 1 %}
          <a href="{{ url_for('home', page=page-1) }}">Précédent</a>
      {% endif %}

      {% for p in range(1, total_pages + 1) %}
          <a href="{{ url_for('home', page=p) }}">{{ p }}</a>
      {% endfor %}

      {% if page < total_pages %}
          <a href="{{ url_for('home', page=page+1) }}">Suivant</a>
      {% endif %}
    </div>

</div>
{% endblock %}
